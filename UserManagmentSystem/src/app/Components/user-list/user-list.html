<div class="container mt-5">
    <div class="row justify-content-center">
        <div class="col-md-12">

            <!-- <ng-container *ngIf="isLoading">
                <div class="text-center mb-3">Loading users...</div>
            </ng-container> -->

            <ng-container *ngIf="errorMessage">
                <div class="text-center text-danger mb-3">{{ errorMessage }}</div>
            </ng-container>

            <ng-container *ngIf="!selectdUser && !isEditing && deleteUserId === null">
                <div class="card shadow-lg rounded-4">
                    <div class="card-header bg-primary text-white text-center">
                        <h4 class="mb-0">User List</h4>
                    </div>

                    <div class="card-body p-0">
                        <table class="table table-striped table-hover mb-0 text-center">
                            <thead class="thead-dark">
                                <tr>
                                    <th>Sr No</th>
                                    <th>User ID</th>
                                    <th>Name</th>
                                    <th>Email</th>
                                    <th>About</th>
                                    <th>Action</th>
                                </tr>
                            </thead>
                            <tbody>
                                <!-- @for (item of items; track $index) {} -->
                                <tr *ngFor="let user of users ;let i =index">
                                    <td>{{i}}</td>
                                    <td>{{user.userId}}</td>
                                    <td>{{user.email}}</td>
                                    <td>{{user.name}}</td>
                                    <td>{{user.about}}</td>
                                    <td><button class="btn btn-success" (click)="viewUser(user.userId)">View</button>
                                        <button class="btn btn-warning" (click)="editUser(user)">Edit</button>
                                        <!-- <button class="btn btn-danger" (click)="deleteUser(user.userId)">Delete</button> -->
                                        <button class="btn btn-danger btn-sm"
                                            (click)="confirmDelete(user.userId)">Delete</button>
                                    </td>

                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </ng-container>

            <ng-container *ngIf="selectdUser && !isEditing">
                <div class="card shadow-lg rounded-4 mt-3">
                    <div class="card-header bg-info text-white text-center">
                        <h5 class="mb-0">User Details</h5>
                    </div>
                    <div class="card-body">
                        <p><strong>User ID:</strong> {{ selectdUser.userId }}</p>
                        <p><strong>Name:</strong> {{ selectdUser.name }}</p>
                        <p><strong>Email:</strong> {{ selectdUser.email }}</p>
                        <p><strong>About:</strong> {{ selectdUser.about }}</p>
                        <button class="btn btn-primary" (click)="Back()">Back</button>
                    </div>
                </div>
            </ng-container>


            <ng-container *ngIf="isEditing && selectdUser">
                <div class="card shadow-lg rounded-4 mt-3">
                    <div class="card-header bg-warning text-white text-center">
                        <h5 class="mb-0">Update User</h5>
                    </div>
                    <div class="card-body">
                        <div class="form-group mb-2">
                            <label>Name</label>
                            <input type="text" class="form-control" [(ngModel)]="selectdUser.name" name="name">
                        </div>
                        <div class="form-group mb-2">
                            <label>Email</label>
                            <input type="email" class="form-control" [(ngModel)]="selectdUser.email" name="email">
                        </div>
                        <div class="form-group mb-2">
                            <label>About</label>
                            <textarea class="form-control" [(ngModel)]="selectdUser.about" name="about"></textarea>
                        </div>
                        <button type="button" class="btn btn-warning" (click)="updateUser()">Update</button>
                        <button type="button" class="btn btn-secondary ms-2" (click)="Back()">Cancel</button>
                    </div>
                </div>
            </ng-container>

            <ng-container *ngIf="deleteUserId !== null">
                <div class="card shadow-lg rounded-4 mt-3 border-danger">
                    <div class="card-header bg-danger text-white text-center">
                        <h5 class="mb-0">Confirm Delete</h5>
                    </div>
                    <div class="card-body text-center">
                        <p>Are you sure you want to delete user ID <strong>{{ deleteUserId }}</strong>?</p>
                        <button class="btn btn-danger me-2" (click)="deleteUser()">Yes, Delete</button>
                        <button class="btn btn-secondary" (click)="cancelDelete()">Cancel</button>
                    </div>
                </div>
            </ng-container>

        </div>
    </div>
</div>